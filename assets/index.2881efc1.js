import{o as d,c as m,a as t,d as x,t as F,b as D,r as v,n as k,u as l,e as oe,g as j,f as g,h as E,i as u,w as _,j as p,k as y,l as P,v as ne,m as ae,p as H,q as A,s as S,x as re,y as ie,z as X,A as le,B as ce,C as U,D as L,E as ue,F as J,N as z,G as de,H as _e,I as Y,J as W,K as pe,T as me,L as he}from"./vendor.c693f556.js";const fe=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};fe();const ve="modulepreload",q={},ye="/",C=function(s,o){return!o||o.length===0?s():Promise.all(o.map(a=>{if(a=`${ye}${a}`,a in q)return;q[a]=!0;const n=a.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${r}`))return;const i=document.createElement("link");if(i.rel=n?"stylesheet":ve,n||(i.as="script",i.crossOrigin=""),i.href=a,document.head.appendChild(i),n)return new Promise((c,h)=>{i.addEventListener("load",c),i.addEventListener("error",h)})})).then(()=>s())};function V(){return window.localStorage.getItem("ADMIN_KEY")}function be(e){window.localStorage.setItem("ADMIN_KEY",e)}window.setAdminKey=be;const xe={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ge=t("path",{d:"M14 13v4h-4v-4H7l5-5l5 5m2.35-2.97A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.03A6.004 6.004 0 0 0 0 14a6 6 0 0 0 6 6h13a5 5 0 0 0 5-5c0-2.64-2.05-4.78-4.65-4.97z",fill:"currentColor"},null,-1),we=[ge];function $e(e,s){return d(),m("svg",xe,we)}var G={name:"mdi-cloud-upload",render:$e};const $=x({props:{padding:null,primary:{type:Boolean},info:{type:Boolean},success:{type:Boolean},warning:{type:Boolean},danger:{type:Boolean}},setup(e){const s=e,{primary:o,info:a,success:n,warning:r,danger:i}=F(s),c=D(()=>(o==null?void 0:o.value)?"is-primary":(a==null?void 0:a.value)?"is-info":(n==null?void 0:n.value)?"is-success":(r==null?void 0:r.value)?"is-warning":(i==null?void 0:i.value)?"is-danger":void 0);return(h,f)=>(d(),m("button",{class:k(["button","inline-flex","justify-center","items-center","rounded","border","border-1","border-[#dbdbdb]","outline-none","cursor-pointer","select-none",l(c),e.padding||"px-3 py-2"])},[v(h.$slots,"default")],2))}});const ke={class:"select relative"},Ee=x({props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:s}){const o=a=>{s("update:modelValue",a.target.value)};return(a,n)=>(d(),m("div",ke,[t("select",{onChange:o,class:"pl-2 pr-8 py-2 cursor-pointer block w-full rounded border border-1 border-[#dbdbdb]"},[v(a.$slots,"default")],32)]))}});var Ae=class{constructor(e){this.option=e,this.api=oe.create({baseURL:e.apiURL})}format(e){return e.replace(/\r\n|\n\r|\n|\r/g,`
`).trim()}encode(e,s){const o=j.encode(this.format(s));return e==="json"?JSON.stringify(JSON.parse(o)):o}decode(e,s){const o=this.format(j.decode(s));return e==="json"?JSON.stringify(JSON.parse(o),null,2):o}async upload(e,s,o={}){if(s.length>this.option.maxLength)throw new Error("Your code is too long.");const a={lang:e,body:this.encode(e,s),timestamp:new Date().toISOString(),once:o.once,pass:o.pass},{data:n}=await this.api.post("/",a);return n}async fetch(e){const{data:s}=await this.api.get(`/${e}`);if("status"in s)throw s;return s.body=this.decode(s.lang,s.body),s}async remove(e){try{const{data:s}=await this.api.delete(`/${e}`);return s.status==="OK"}catch{return!1}}async list({start:e=0,count:s=10}){var o;try{const{data:a}=await this.api.get("/admin/list",{params:{start:e,count:s},headers:{Authorization:this.option.adminKey}}),n=(o=a.submissions)!=null?o:[];for(const r of n)r.body=this.format(j.decode(r.body));return n.sort((r,i)=>{const c=new Date(r.timestamp).getTime();return new Date(i.timestamp).getTime()-c})}catch{return[]}}};function Le(e={}){return e.apiURL||(e.apiURL="https://api.xlorpaste.cn"),e.maxLength||(e.maxLength=1048576),e.adminKey||(e.adminKey=""),new Ae(e)}var se;const M=(se=V())!=null?se:"",R=Le({adminKey:M}),w={lang:"",body:"",submission:void 0};async function Ce(e,s){return w.submission&&w.lang===e&&w.body===s||(w.submission=await R.upload(e,s),w.lang=e,w.body=s),w.submission}async function Be(e){return await R.fetch(e)}async function bs(e=0,s=10){return M&&M.length>0?await R.list({start:e,count:s}):[]}const Te={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Fe=t("path",{d:"M13 14h-2V9h2m0 9h-2v-2h2M1 21h22L12 2L1 21z",fill:"currentColor"},null,-1),De=[Fe];function je(e,s){return d(),m("svg",Te,De)}var Pe={name:"mdi-alert",render:je};const Se={class:"rounded bg-light-400 p-8"},Ve=t("h2",null,"\u4E0A\u4F20\u6210\u529F",-1),Me=t("span",null,"\u60A8\u5206\u4EAB\u7684\u4EE3\u7801 ",-1),Re=t("span",{class:"font-bold font-mono"},"Token",-1),Ne=t("span",null," \u662F ",-1),Ie=t("span",null,".",-1),Ke=t("p",null,"\u60A8\u73B0\u5728\u53EF\u4EE5",-1),Oe={class:"h-8"},He=p(" \u5728\u5BFC\u822A\u680F\u8F93\u5165 "),Xe=t("span",{class:"font-bold font-mono"},"Token ",-1),Ue={class:"text-brand font-mono"},Je=p("\u590D\u5236 Token"),ze={class:"h-8"},Ye=p(" \u8BBF\u95EE\u4EE3\u7801\u94FE\u63A5 "),We=p("\u590D\u5236\u94FE\u63A5"),qe={class:"min-h-8"},Ge={class:"h-8 flex items-center"},Qe={class:"ml-2"},Ze=p("\u60A8\u53EF\u4EE5\u4F7F\u7528 "),et=p(" \u5220\u9664\u8FD9\u4EFD\u4EE3\u7801."),tt=x({props:{sub:null},setup(e){const s=e,{sub:o}=F(s),a=window.origin+"/view/"+o.value.token,n=async()=>{await window.navigator.clipboard.writeText(o.value.token)},r=async()=>{await window.navigator.clipboard.writeText(a)},i=async()=>{await window.navigator.clipboard.writeText(o.value.delete)},c=g(!1);return(h,f)=>{const b=E("router-link");return d(),m("div",Se,[Ve,t("p",null,[Me,Re,Ne,u(b,{class:"font-mono",to:{name:"View",params:{token:l(o).token}}},{default:_(()=>[p(y(l(o).token),1)]),_:1},8,["to"]),Ie]),Ke,t("ul",null,[t("li",Oe,[He,Xe,t("span",Ue,y(l(o).token),1),u($,{padding:"px-2 py-1",class:"ml-2 text-xs",success:"",onClick:n},{default:_(()=>[Je]),_:1})]),t("li",ze,[Ye,t("a",{class:"font-mono",href:a,target:"_blank"},y(a)),u($,{padding:"px-2 py-1",class:"ml-2 text-xs",success:"",onClick:r},{default:_(()=>[We]),_:1})]),t("li",qe,[t("div",{class:"cursor-pointer text-brand select-none",onClick:f[0]||(f[0]=O=>c.value=!c.value)}," \u751F\u6210\u4E8C\u7EF4\u7801 "),P(u(l(ae),{class:"mt-2",value:a,options:{width:120}},null,512),[[ne,c.value]])])]),t("p",Ge,[u(l(Pe),{class:"text-red-500"}),t("span",Qe,[Ze,t("span",{class:"text-brand font-mono cursor-pointer",onClick:i},y(l(o).delete),1),et])]),v(h.$slots,"default")])}}}),st={key:0},ot={class:"mb-4 flex"},nt={class:"inline-flex items-center mr-4"},at=t("label",{for:"lang",class:"font-bold mr-2"},"\u8BED\u8A00 ",-1),rt=t("option",{value:"text"},"\u7EAF\u6587\u672C",-1),it=t("option",{value:"cpp",selected:""},"C++",-1),lt=t("option",{value:"md"},"Markdown",-1),ct=t("option",{value:"c"},"C",-1),ut=t("option",{value:"java"},"Java",-1),dt=t("option",{value:"python"},"Python",-1),_t=t("option",{value:"javascript"},"JavaScript",-1),pt=t("option",{value:"json"},"JSON",-1),mt=t("option",{value:"yaml"},"Yaml",-1),ht=t("option",{value:"html"},"HTML",-1),ft=t("option",{value:"css"},"CSS",-1),vt=p(" \u63D0\u4EA4"),yt={class:"flex mb-4"},bt=["rows","onKeydown"],xt=p(" \u63D0\u4EA4"),gt={key:1},wt=p("\u8FD4\u56DE"),$t=x({setup(e){const s=g(""),o=g("cpp"),a=g(null),n=async()=>{if(s.value.length===0)return;const i=await Ce(o.value,s.value);a.value=i,s.value=""},r=window.innerWidth>=768?Math.max(10,Math.floor((window.innerHeight-320)/16/window.devicePixelRatio)):10;return(i,c)=>a.value?(d(),m("div",gt,[u(tt,{sub:a.value},{default:_(()=>[u($,{onClick:c[3]||(c[3]=h=>a.value=null),info:""},{default:_(()=>[wt]),_:1})]),_:1},8,["sub"])])):(d(),m("div",st,[t("div",ot,[t("div",nt,[at,u(l(Ee),{name:"lang",id:"lang",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=h=>o.value=h)},{default:_(()=>[rt,it,lt,ct,ut,dt,_t,pt,mt,ht,ft]),_:1},8,["modelValue"])]),u($,{success:"",onClick:n},{default:_(()=>[u(l(G),{class:"mr-2"}),vt]),_:1})]),t("div",yt,[P(t("textarea",{ref:"elBody",name:"area-body",id:"area-body",rows:l(r),class:"font-mono text-base flex-1 border-1 border-light-900 rounded px-3 py-2 outline-none focus:border-blue-300",onKeydown:[c[1]||(c[1]=A(S(()=>{},["prevent"]),["tab"])),A(S(n,["ctrl"]),["enter"]),A(S(n,["ctrl","prevent"]),["s"])],"onUpdate:modelValue":c[2]||(c[2]=h=>s.value=h),autofocus:""},null,40,bt),[[H,s.value]])]),t("div",null,[u($,{success:"",onClick:n},{default:_(()=>[u(l(G),{class:"mr-2"}),xt]),_:1})])]))}});let N=null;const I=[];let K=null;const B=["c","cpp","java","javascript","json","python","typescript","yaml","html","css"],kt=new Map([["c++","cpp"],["C++","cpp"],["C","c"],["js","javascript"],["ts","typescript"],["py","python"]]);function Q(e){return!!B.find(s=>s===e)}async function T(...e){if(N)return N=await X({themes:I,langs:e});{const s="/";return le(s),re(await fetch(s+"onig.wasm").then(o=>o.arrayBuffer())),I.push(await ie("themes/eva-light.json")),N=await X({themes:I,langs:e})}}async function Et(){await T(B[0]),await Promise.all(B.slice(1).map(e=>T(e)))}function Z(e){return e.replace(/[<>"& ]/g,s=>{switch(s){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"&":return"&amp;";case" ":return"&nbsp;";default:return""}})}async function At(e,s){const o=()=>`<pre class="shiki"><code>${Z(s).split(`
`).map(a=>`<span class="line">${a}</span>`).join(`
`)}</code></pre>`;if(e==="text")return o();if(e==="md"){if(!K){await Et();const a=await T(...B),{createMarkdown:n}=await C(()=>import("./markdown.8faee343.js"),["assets/markdown.8faee343.js","assets/github-markdown.7ac8ffb9.css","assets/vendor.c693f556.js"]);K=n({highlight:(r,i)=>{var c;return r=r.trim(),i=(c=kt.get(i))!=null?c:i,Q(i)?a.codeToHtml(r,{lang:i}):Z(r)}})}return`<div class="markdown-body">${K(s)}</div>`}else return Q(e)?(await T(e)).codeToHtml(s,{lang:e}):o()}const Lt={key:0,class:"code-box rounded-lg"},Ct={class:"px-4 py-4 <md:px-2 font-mono flex justify-between items-center",style:{"border-bottom":"1px solid rgb(235, 238, 245)"}},Bt={class:"<md:text-sm"},Tt=t("span",{class:"font-bold"},"Token ",-1),Ft=t("span",{class:"font-bold ml-4"},"\u8BED\u8A00 ",-1),Dt=["innerHTML"],jt={key:0,class:"p-4 font-mono flex justify-between items-center",style:{"border-top":"1px solid rgb(235, 238, 245)"}},Pt=x({props:{sub:null,footer:{type:Boolean},maxLine:null},setup(e){const s=e;ce(f=>({"093d8bef":l(a),"4907f3fd":l(h)}));const{sub:o,maxLine:a}=F(s),n=g("");U(o,f=>{At(f.lang,f.body).then(b=>n.value=b)},{immediate:!0});const r=async()=>{await navigator.clipboard.writeText(o.value.body)},i=D(()=>o.value.body.split(`
`).length),c=g(null),h=D(()=>c.value?c.value.clientWidth+2+"px":"1em");return(f,b)=>{const O=E("router-link");return n.value.length>0?(d(),m("div",Lt,[t("div",Ct,[t("div",Bt,[t("span",{class:k([l(o).lang!=="md"?"ml-token":"ml-md","<md:text-xs"])},null,2),Tt,u(O,{to:{name:"View",params:{token:l(o).token}}},{default:_(()=>[p(y(l(o).token),1)]),_:1},8,["to"]),Ft,t("span",null,y(l(o).lang),1)]),t("div",null,[t("a",{class:"px-4 py-2 cursor-pointer",onClick:r},"\u590D\u5236")])]),t("div",{class:k(["px-4 py-4 overflow-x-auto <md:text-xs <md:p-2",l(a)&&"max-line"]),innerHTML:n.value},null,10,Dt),e.footer?(d(),m("div",jt,[t("div",{class:k([l(o).lang!=="md"?"ml-token":"ml-md","<md:text-xs"])},[v(f.$slots,"footer")],2)])):L("",!0),t("div",{class:"hidden-measure font-mono <md:text-xs",ref_key:"measure",ref:c},y(l(i)+1),513)])):L("",!0)}}}),St={key:0},Vt=x({setup(e){const s=ue(),o=J(),a=g(null);return U(()=>s.params.token,async n=>{try{if(z.start(),n){const r=await Be(n);a.value=r}else throw new Error("token is empty")}catch{setTimeout(()=>o.push({name:"Home"}),0)}finally{z.done()}},{immediate:!0}),(n,r)=>a.value?(d(),m("div",St,[u(l(Pt),{sub:a.value},null,8,["sub"])])):L("",!0)}}),ee=de({history:_e(),routes:[{path:"/",name:"Home",component:$t,meta:{title:"\u4E0A\u4F20"}},{path:"/editor",name:"Editor",component:()=>C(()=>import("./Editor.38205cac.js"),["assets/Editor.38205cac.js","assets/vendor.c693f556.js"]),meta:{title:"\u7F16\u8F91\u5668"}},{path:"/view/:token",alias:"/:token",name:"View",component:Vt,meta:{title:"\u4EE3\u7801"}},{path:"/admin",name:"Admin",component:()=>C(()=>import("./Admin.ede5d53f.js"),["assets/Admin.ede5d53f.js","assets/Admin.bc1fcbea.css","assets/vendor.c693f556.js"]),meta:{title:"\u7BA1\u7406"},beforeEnter(e,s){const o=V();return!!o&&o.length>0}},{path:"/help",name:"Help",component:()=>C(()=>import("./About.dd8b9f70.js"),["assets/About.dd8b9f70.js","assets/github-markdown.7ac8ffb9.css","assets/vendor.c693f556.js"]),meta:{title:"\u5E2E\u52A9"}}],scrollBehavior(e,s,o){return o||{top:0}}});ee.beforeEach(e=>{e.meta.title?document.title=e.meta.title+" - XLor Paste":document.title="XLor Paste"});const Mt={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Rt=t("path",{d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z",fill:"currentColor"},null,-1),Nt=[Rt];function It(e,s){return d(),m("svg",Mt,Nt)}var Kt={name:"mdi-github",render:It};var Ot=(e,s)=>{const o=e.__vccOpts||e;for(const[a,n]of s)o[a]=n;return o};const Ht={},Xt={class:"py-2 md:px-8 <md:px-4 navbar-flex navbar"},Ut={class:"navbar-brand navbar-flex items-center bg-transparent cursor-pointer"},Jt={class:"navbar-menu navbar-flex flex-1 <md:w-full"},zt={class:"navbar-start justify-start items-center md:mr-auto <md:w-full"},Yt={class:"<md:hidden navbar-end navbar-flex justify-end items-center ml-auto"};function Wt(e,s){return d(),m("nav",Xt,[t("div",Ut,[v(e.$slots,"brand")]),t("div",Jt,[t("div",zt,[v(e.$slots,"start"),v(e.$slots,"default")]),t("div",Yt,[v(e.$slots,"end")])])])}var qt=Ot(Ht,[["render",Wt]]);const te=x({props:{tag:{type:String,default:"a"}},setup(e){return(s,o)=>(d(),Y(W(e.tag),{class:"navbar-item flex select-none cursor-pointer rounded px-[0.75rem] py-[0.5rem] hover:(bg-gray-100 text-blue-500)"},{default:_(()=>[v(s.$slots,"default")]),_:3}))}});const Gt=p("XLorPaste"),Qt={class:"flex relative font-mono <md:w-full"},Zt=["onKeypress"],es={class:"md:px-10 <md:px-[1.75rem] pt-6 main-view"},ts={class:"mt-4 px-1 py-4 text-sm"},ss={class:"text-center text-gray-400"},os={class:"flex justify-center font-mono h-4 my-1"},ns={class:"text-$text-light-1 inline-flex items-center mr-2",href:"https://github.com/XLorPaste",target:"_blank"},as=["href"],rs=["href"],is={class:"font-mono my-1"},ls={key:0},cs=p("\u7BA1\u7406"),us=p(" | "),ds=p("\u5E2E\u52A9"),_s=p(" | "),ps=t("a",{href:"https://upptime.xlorpaste.cn/",target:"_blank",rel:"noopener noreferrer"},"\u72B6\u6001",-1),ms=p(" | "),hs=t("a",{href:"http://www.miitbeian.gov.cn",target:"_blank",rel:"noopener noreferrer"},"\u82CFICP\u590719000844\u53F7",-1),fs=t("p",{class:"font-mono my-1"},[t("span",null,"\xA9 2021 "),t("a",{href:"https://github.com/yjl9903",target:"_blank"},"XLor"),t("span",null," All rights reserved")],-1),vs=x({setup(e){const s="1.0.2",o="04e141262a8346a14883a6d9b444e6be5ec93064",a=J(),n=g(""),r=async()=>{n.value!==""&&(await a.push({name:"View",params:{token:n.value}}),n.value="")};return(i,c)=>{const h=E("router-view"),f=E("router-link");return d(),m(pe,null,[u(l(qt),null,{brand:_(()=>[u(l(te),{tag:"router-link",to:{name:"Home"},class:"font-mono font-bold text-xl"},{default:_(()=>[Gt]),_:1})]),start:_(()=>[u(l(te),null,{default:_(()=>[t("div",Qt,[P(t("input",{type:"text",name:"search",id:"search",placeholder:"\u4EE3\u7801 Token",autocomplete:"off",class:"flex-1 px-2 py-2 text-xs rounded-md border-1 border-light-900 outline-none focus:border-blue-300","onUpdate:modelValue":c[0]||(c[0]=b=>n.value=b),onKeypress:A(r,["enter"])},null,40,Zt),[[H,n.value]])])]),_:1})]),_:1}),t("div",es,[u(h,null,{default:_(({Component:b})=>[u(me,{name:"fade"},{default:_(()=>[(d(),Y(W(b)))]),_:2},1024)]),_:1})]),t("footer",ts,[t("div",ss,[t("div",os,[t("a",ns,[u(l(Kt),{class:"align-middle"})]),l(o)?(d(),m("a",{key:1,class:"inline-block",href:`https://github.com/XLorPaste/XLorPaste/tree/${l(o)}`,target:"_blank"},[t("span",null,"XLorPaste: "+y(l(o).slice(0,10)),1)],8,rs)):(d(),m("a",{key:0,class:"inline-block",href:"https://github.com/XLorPaste/XLorPaste",target:"_blank"},[t("span",null,"XLorPaste: "+y(l(s)),1)],8,as))]),t("p",is,[l(V)()?(d(),m("span",ls,[u(f,{to:{name:"Admin"}},{default:_(()=>[cs]),_:1}),us])):L("",!0),u(f,{to:{name:"Help"}},{default:_(()=>[ds]),_:1}),_s,ps,ms,hs]),fs])])],64)}}});he(vs).use(ee).mount("#app");export{Ot as _,Pt as a,bs as l,Et as p};
