import{o as _,c as h,a as e,d as y,t as C,b as L,r as v,n as U,u as i,e as z,g as B,f as g,h as k,i as u,w as p,j as m,k as b,l as F,v as Y,m as W,p as M,q as E,s as D,x as q,y as J,z as G,A as Q,B as Z,C as I,D as A,E as ee,F as R,G as te,H as oe,I as S,J as H,K as se,T as ne,L as ae}from"./vendor.0b803fca.js";const re=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}};re();const le="modulepreload",K={},ie="/",T=function(o,s){return!s||s.length===0?o():Promise.all(s.map(a=>{if(a=`${ie}${a}`,a in K)return;K[a]=!0;const n=a.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${r}`))return;const l=document.createElement("link");if(l.rel=n?"stylesheet":le,n||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),n)return new Promise((c,d)=>{l.addEventListener("load",c),l.addEventListener("error",d)})})).then(()=>o())};function V(){return window.localStorage.getItem("ADMIN_KEY")}function ce(t){window.localStorage.setItem("ADMIN_KEY",t)}window.setAdminKey=ce;const ue={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},de=e("path",{d:"M14 13v4h-4v-4H7l5-5l5 5m2.35-2.97A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.03A6.004 6.004 0 0 0 0 14a6 6 0 0 0 6 6h13a5 5 0 0 0 5-5c0-2.64-2.05-4.78-4.65-4.97z",fill:"currentColor"},null,-1),_e=[de];function pe(t,o){return _(),h("svg",ue,_e)}var N={name:"mdi-cloud-upload",render:pe};const w=y({props:{padding:null,primary:{type:Boolean},info:{type:Boolean},success:{type:Boolean},warning:{type:Boolean},danger:{type:Boolean}},setup(t){const o=t,{primary:s,info:a,success:n,warning:r,danger:l}=C(o),c=L(()=>(s==null?void 0:s.value)?"is-primary":(a==null?void 0:a.value)?"is-info":(n==null?void 0:n.value)?"is-success":(r==null?void 0:r.value)?"is-warning":(l==null?void 0:l.value)?"is-danger":void 0);return(d,f)=>(_(),h("button",{class:U(["button","inline-flex","justify-center","items-center","rounded","border","border-1","border-[#dbdbdb]","outline-none","cursor-pointer","select-none",i(c),t.padding||"px-3 py-2"])},[v(d.$slots,"default")],2))}}),me={class:"select relative"},he=y({props:["modelValue"],emits:["update:modelValue"],setup(t,{emit:o}){const s=a=>{o("update:modelValue",a.target.value)};return(a,n)=>(_(),h("div",me,[e("select",{onChange:s,class:"pl-2 pr-8 py-2 cursor-pointer block w-full outline-none rounded border border-1 border-[#dbdbdb] appearance-none"},[v(a.$slots,"default")],32)]))}});var fe=class{constructor(t){this.api=z.create({baseURL:t!=null?t:"https://api.xlorpaste.cn"})}format(t){return t.replace(/\r\n|\n\r|\n|\r/g,`
`).trim()}async upload(t,o,s={}){const a={lang:t,body:B.encode(this.format(o)),timestamp:new Date().toISOString(),once:s.once,pass:s.pass},{data:n}=await this.api.post("/",a);return n}async fetch(t){const{data:o}=await this.api.get(`/${t}`);if("status"in o)throw o;return o.body=this.format(B.decode(o.body)),o}async remove(t){try{const{data:o}=await this.api.delete(`/${t}`);return o.status==="OK"}catch{return!1}}async list(t){var o;try{const{data:s}=await this.api.get("/admin",{headers:{Authorization:t}}),a=(o=s.submissions)!=null?o:[];for(const n of a)n.body=this.format(B.decode(n.body));return a.sort((n,r)=>{const l=new Date(n.timestamp).getTime();return new Date(r.timestamp).getTime()-l})}catch{return[]}}};function ve(t={}){return new fe(t.apiURL)}const P=ve(),x={lang:"",body:"",submission:void 0};async function be(t,o){return x.submission&&x.lang===t&&x.body===o||(x.submission=await P.upload(t,o),x.lang=t,x.body=o),x.submission}async function ye(t){return await P.fetch(t)}async function io(){const t=V();return t&&t.length>0?await P.list(t):[]}const ge={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},xe=e("path",{d:"M13 14h-2V9h2m0 9h-2v-2h2M1 21h22L12 2L1 21z",fill:"currentColor"},null,-1),$e=[xe];function we(t,o){return _(),h("svg",ge,$e)}var ke={name:"mdi-alert",render:we};const Ee={class:"rounded bg-light-400 p-8"},Ae=e("h2",null,"\u4E0A\u4F20\u6210\u529F",-1),Ce=e("span",null,"\u60A8\u5206\u4EAB\u7684\u4EE3\u7801 ",-1),Le=e("span",{class:"font-bold font-mono"},"Token",-1),Be=e("span",null," \u662F ",-1),Fe=e("span",null,".",-1),De=e("p",null,"\u60A8\u73B0\u5728\u53EF\u4EE5",-1),Te={class:"h-8"},Ve=m(" \u5728\u5BFC\u822A\u680F\u8F93\u5165 "),Pe=e("span",{class:"font-bold font-mono"},"Token ",-1),je={class:"text-brand font-mono"},Me=m("\u590D\u5236 Token"),Ie={class:"h-8"},Re=m(" \u8BBF\u95EE\u4EE3\u7801\u94FE\u63A5 "),Se=m("\u590D\u5236\u94FE\u63A5"),He={class:"min-h-8"},Ke={class:"h-8 flex items-center"},Ne={class:"ml-2"},Oe=m("\u60A8\u53EF\u4EE5\u4F7F\u7528 "),Xe=m(" \u5220\u9664\u8FD9\u4EFD\u4EE3\u7801."),Ue=y({props:{sub:null},setup(t){const o=t,{sub:s}=C(o),a=window.origin+"/view/"+s.value.token,n=async()=>{await window.navigator.clipboard.writeText(s.value.token)},r=async()=>{await window.navigator.clipboard.writeText(a)},l=async()=>{await window.navigator.clipboard.writeText(s.value.delete)},c=g(!1);return(d,f)=>{const $=k("router-link");return _(),h("div",Ee,[Ae,e("p",null,[Ce,Le,Be,u($,{class:"font-mono",to:{name:"View",params:{token:i(s).token}}},{default:p(()=>[m(b(i(s).token),1)]),_:1},8,["to"]),Fe]),De,e("ul",null,[e("li",Te,[Ve,Pe,e("span",je,b(i(s).token),1),u(w,{padding:"px-2 py-1",class:"ml-2 text-xs",success:"",onClick:n},{default:p(()=>[Me]),_:1})]),e("li",Ie,[Re,e("a",{class:"font-mono",href:a,target:"_blank"},b(a)),u(w,{padding:"px-2 py-1",class:"ml-2 text-xs",success:"",onClick:r},{default:p(()=>[Se]),_:1})]),e("li",He,[e("div",{class:"cursor-pointer text-brand select-none",onClick:f[0]||(f[0]=ro=>c.value=!c.value)}," \u751F\u6210\u4E8C\u7EF4\u7801 "),F(u(i(W),{class:"mt-2",value:a,options:{width:120}},null,512),[[Y,c.value]])])]),e("p",Ke,[u(i(ke),{class:"text-red-500"}),e("span",Ne,[Oe,e("span",{class:"text-brand font-mono cursor-pointer",onClick:l},b(i(s).delete),1),Xe])]),v(d.$slots,"default")])}}}),ze={key:0},Ye={class:"mb-4 flex"},We={class:"inline-flex items-center mr-4"},qe=e("label",{for:"lang",class:"font-bold mr-2"},"\u8BED\u8A00 ",-1),Je=e("option",{value:"text",selected:""},"\u7EAF\u6587\u672C",-1),Ge=e("option",{value:"cpp",selected:""},"C++",-1),Qe=e("option",{value:"c"},"C",-1),Ze=e("option",{value:"java"},"Java",-1),et=e("option",{value:"python"},"Python",-1),tt=e("option",{value:"javascript"},"JavaScript",-1),ot=e("option",{value:"json"},"JSON",-1),st=e("option",{value:"yaml"},"Yaml",-1),nt=m(" \u63D0\u4EA4"),at={class:"flex mb-4"},rt=["rows","onKeydown"],lt=m(" \u63D0\u4EA4"),it={key:1},ct=m("\u8FD4\u56DE"),ut=y({setup(t){const o=g(""),s=g("cpp"),a=g(null),n=async()=>{if(o.value.length===0)return;const l=await be(s.value,o.value);a.value=l,o.value=""},r=window.innerWidth>=768?Math.max(10,Math.floor((window.innerHeight-250)/16/window.devicePixelRatio)):10;return(l,c)=>a.value?(_(),h("div",it,[u(Ue,{sub:a.value},{default:p(()=>[u(w,{onClick:c[3]||(c[3]=d=>a.value=null),info:""},{default:p(()=>[ct]),_:1})]),_:1},8,["sub"])])):(_(),h("div",ze,[e("div",Ye,[e("div",We,[qe,u(i(he),{name:"lang",id:"lang",modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=d=>s.value=d)},{default:p(()=>[Je,Ge,Qe,Ze,et,tt,ot,st]),_:1},8,["modelValue"])]),u(w,{success:"",onClick:n},{default:p(()=>[u(i(N),{class:"mr-2"}),nt]),_:1})]),e("div",at,[F(e("textarea",{ref:"elBody",name:"area-body",id:"area-body",rows:i(r),class:"font-mono text-base flex-1 border-1 border-light-900 rounded px-3 py-2 outline-none focus:border-blue-300",onKeydown:[c[1]||(c[1]=E(D(()=>{},["prevent"]),["tab"])),E(D(n,["ctrl"]),["enter"]),E(D(n,["ctrl","prevent"]),["s"])],"onUpdate:modelValue":c[2]||(c[2]=d=>o.value=d),autofocus:""},null,40,rt),[[M,o.value]])]),e("div",null,[u(w,{success:"",onClick:n},{default:p(()=>[u(i(N),{class:"mr-2"}),lt]),_:1})])]))}});let j=null;async function dt(){if(!j){const t="/";Q(t),q(await fetch(t+"onig.wasm").then(s=>s.arrayBuffer()));const o=[await J("themes/eva-light.json")];j=await G({themes:o,langs:["c","cpp","java","javascript","json","python","typescript","yaml"]})}}async function _t(t,o){return t==="text"?`<pre class="shiki"><code>${o.replace(/[<>"& ]/g,a=>{switch(a){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"&":return"&amp;";case" ":return"&nbsp;";default:return""}}).split(`
`).map(a=>`<span class="line">${a}</span>`).join(`
`)}</code></pre>`:(await dt(),j.codeToHtml(o,{lang:t}))}const pt={key:0,class:"code-box rounded-lg"},mt={class:"px-4 py-4 <md:px-2 font-mono flex justify-between items-center",style:{"border-bottom":"1px solid rgb(235, 238, 245)"}},ht={class:"<md:text-sm"},ft=e("span",{class:"ml-token <md:text-xs"},null,-1),vt=e("span",{class:"font-bold"},"Token ",-1),bt=e("span",{class:"font-bold ml-4"},"\u8BED\u8A00 ",-1),yt=["innerHTML"],gt={key:0,class:"p-4 font-mono flex justify-between items-center",style:{"border-top":"1px solid rgb(235, 238, 245)"}},xt={class:"ml-token <md:text-xs"},$t=y({props:{sub:null,footer:{type:Boolean}},setup(t){const o=t;Z(d=>({"132b4016":i(c)}));const{sub:s}=C(o),a=g("");I(s,d=>{_t(d.lang,d.body).then(f=>a.value=f)},{immediate:!0});const n=async()=>{await navigator.clipboard.writeText(s.value.body)},r=L(()=>s.value.body.split(`
`).length),l=g(null),c=L(()=>l.value?l.value.clientWidth+2+"px":"1em");return(d,f)=>{const $=k("router-link");return a.value.length>0?(_(),h("div",pt,[e("div",mt,[e("div",ht,[ft,vt,u($,{to:{name:"View",params:{token:i(s).token}}},{default:p(()=>[m(b(i(s).token),1)]),_:1},8,["to"]),bt,e("span",null,b(i(s).lang),1)]),e("div",null,[e("a",{class:"px-2 py-2 cursor-pointer",onClick:n},"\u590D\u5236")])]),e("div",{class:"px-4 py-4 overflow-x-auto <md:text-xs <md:p-2",innerHTML:a.value},null,8,yt),t.footer?(_(),h("div",gt,[e("div",xt,[v(d.$slots,"footer")])])):A("",!0),e("div",{class:"hidden-measure font-mono <md:text-xs",ref_key:"measure",ref:l},b(i(r)+1),513)])):A("",!0)}}}),wt={key:0},kt=y({setup(t){const o=ee(),s=R(),a=g(null);return I(()=>o.params.token,async n=>{try{const r=await ye(n);a.value=r}catch{setTimeout(()=>s.push({name:"Home"}),3e3)}},{immediate:!0}),(n,r)=>a.value?(_(),h("div",wt,[u(i($t),{sub:a.value},null,8,["sub"])])):A("",!0)}}),O=te({history:oe(),routes:[{path:"/",name:"Home",component:ut,meta:{title:"\u4E0A\u4F20"}},{path:"/editor",name:"Editor",component:()=>T(()=>import("./Editor.a7136a7f.js"),["assets/Editor.a7136a7f.js","assets/vendor.0b803fca.js"]),meta:{title:"\u7F16\u8F91\u5668"}},{path:"/view/:token",name:"View",component:kt,meta:{title:"\u4EE3\u7801"}},{path:"/admin",name:"Admin",component:()=>T(()=>import("./Admin.09c21000.js"),["assets/Admin.09c21000.js","assets/Admin.248fd786.css","assets/vendor.0b803fca.js"]),meta:{title:"\u7BA1\u7406"},beforeEnter(t,o){const s=V();return!!s&&s.length>0}},{path:"/help",name:"Help",component:()=>T(()=>import("./About.ce931806.js"),["assets/About.ce931806.js","assets/About.31f894e5.css","assets/vendor.0b803fca.js"]),meta:{title:"\u5E2E\u52A9"}}],scrollBehavior(t,o,s){return s||{top:0}}});O.beforeEach(t=>{t.meta.title?document.title=t.meta.title+" - XLor Paste":document.title="XLor Paste"});const Et={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},At=e("path",{d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z",fill:"currentColor"},null,-1),Ct=[At];function Lt(t,o){return _(),h("svg",Et,Ct)}var Bt={name:"mdi-github",render:Lt};var Ft=(t,o)=>{const s=t.__vccOpts||t;for(const[a,n]of o)s[a]=n;return s};const Dt={},Tt={class:"py-2 md:px-8 <md:px-4 navbar-flex navbar"},Vt={class:"navbar-brand navbar-flex items-center bg-transparent cursor-pointer"},Pt={class:"navbar-menu navbar-flex flex-1 <md:w-full"},jt={class:"navbar-start justify-start items-center md:mr-auto <md:w-full"},Mt={class:"<md:hidden navbar-end navbar-flex justify-end items-center ml-auto"};function It(t,o){return _(),h("nav",Tt,[e("div",Vt,[v(t.$slots,"brand")]),e("div",Pt,[e("div",jt,[v(t.$slots,"start"),v(t.$slots,"default")]),e("div",Mt,[v(t.$slots,"end")])])])}var Rt=Ft(Dt,[["render",It]]);const X=y({props:{tag:{type:String,default:"a"}},setup(t){return(o,s)=>(_(),S(H(t.tag),{class:"navbar-item flex select-none cursor-pointer rounded px-[0.75rem] py-[0.5rem] hover:(bg-gray-100 text-blue-500)"},{default:p(()=>[v(o.$slots,"default")]),_:3}))}});const St=m("XLorPaste"),Ht={class:"flex relative font-mono <md:w-full"},Kt=["onKeypress"],Nt={class:"md:px-10 <md:px-[1.75rem] pt-6 main-view"},Ot={class:"mt-4 px-1 py-4 text-sm"},Xt={class:"text-center text-gray-400"},Ut={class:"flex items-center justify-center font-mono h-4 my-1"},zt={class:"text-$text-light-1 inline-block mr-2",href:"https://github.com/XLorPaste",target:"_blank"},Yt=["href"],Wt=["href"],qt={class:"font-mono my-1"},Jt={key:0},Gt=m("\u7BA1\u7406"),Qt=m(" | "),Zt=m("\u5E2E\u52A9"),eo=m(" | "),to=e("a",{href:"https://upptime.xlorpaste.cn/",target:"_blank",rel:"noopener noreferrer"},"\u72B6\u6001",-1),oo=m(" | "),so=e("a",{href:"http://www.miitbeian.gov.cn",target:"_blank",rel:"noopener noreferrer"},"\u82CFICP\u590719000844\u53F7",-1),no=e("p",{class:"font-mono my-1"},[e("span",null,"\xA9 2021 "),e("a",{href:"https://github.com/yjl9903",target:"_blank"},"XLor"),e("span",null," All rights reserved")],-1),ao=y({setup(t){const o="0.0.1",s="8c3099b75a351fb2b086a51082dfa8545ffbb767",a=R(),n=g(""),r=async()=>{await a.push({name:"View",params:{token:n.value}}),n.value=""};return(l,c)=>{const d=k("router-view"),f=k("router-link");return _(),h(se,null,[u(i(Rt),null,{brand:p(()=>[u(i(X),{tag:"router-link",to:{name:"Home"},class:"font-mono font-bold text-xl"},{default:p(()=>[St]),_:1})]),start:p(()=>[u(i(X),null,{default:p(()=>[e("div",Ht,[F(e("input",{type:"text",name:"search",id:"search",placeholder:"\u4EE3\u7801 Token",autocomplete:"off",class:"flex-1 px-2 py-2 rounded-md border-1 border-light-900 outline-none focus:border-blue-300","onUpdate:modelValue":c[0]||(c[0]=$=>n.value=$),onKeypress:E(r,["enter"])},null,40,Kt),[[M,n.value]])])]),_:1})]),_:1}),e("div",Nt,[u(d,null,{default:p(({Component:$})=>[u(ne,{name:"fade"},{default:p(()=>[(_(),S(H($)))]),_:2},1024)]),_:1})]),e("footer",Ot,[e("div",Xt,[e("div",Ut,[e("a",zt,[u(i(Bt),{class:"align-middle"})]),i(s)?(_(),h("a",{key:1,class:"inline-block",href:`https://github.com/XLorPaste/XLorPaste/tree/${i(s)}`,target:"_blank"},[e("span",null,"XLorPaste: "+b(i(s).slice(0,10)),1)],8,Wt)):(_(),h("a",{key:0,class:"inline-block",href:"https://github.com/XLorPaste/XLorPaste",target:"_blank"},[e("span",null,"XLorPaste: "+b(i(o)),1)],8,Yt))]),e("p",qt,[i(V)()?(_(),h("span",Jt,[u(f,{to:{name:"Admin"}},{default:p(()=>[Gt]),_:1}),Qt])):A("",!0),u(f,{to:{name:"Help"}},{default:p(()=>[Zt]),_:1}),eo,to,oo,so]),no])])],64)}}});ae(ao).use(O).mount("#app");export{Ft as _,$t as a,io as l};
